<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Adsorption Models Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2c5aa0;
            --secondary: #4caf50;
            --accent: #ff9800;
            --danger: #f44336;
            --light: #f5f9ff;
            --dark: #1a237e;
            --text: #333;
            --border: #ddd;
            --success: #4CAF50;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Tahoma', 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f5 100%);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
        }
        
        h1 {
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 2.4rem;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .description {
            color: #555;
            max-width: 900px;
            margin: 0 auto;
            font-size: 1.1rem;
        }
        
        .developers {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .developer-card {
            background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
            padding: 15px 25px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            min-width: 200px;
        }
        
        .developer-name {
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .developer-role {
            color: var(--dark);
            font-size: 0.9rem;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 25px;
        }
        
        @media (max-width: 1100px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.12);
        }
        
        .card-title {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--light);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }
        
        .card-title i {
            margin-left: 10px;
            font-size: 1.3rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s, box-shadow 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.2);
        }
        
        .data-format {
            font-size: 0.85rem;
            color: #666;
            margin-top: 5px;
            background: #f9f9f9;
            padding: 8px;
            border-radius: 5px;
        }
        
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: background 0.3s, transform 0.2s;
            display: inline-block;
            margin: 5px;
        }
        
        .btn:hover {
            background: var(--dark);
            transform: translateY(-2px);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background: var(--secondary);
        }
        
        .btn-secondary:hover {
            background: #3d8b40;
        }
        
        .btn-danger {
            background: var(--danger);
        }
        
        .btn-danger:hover {
            background: #d32f2f;
        }
        
        .btn-small {
            padding: 8px 15px;
            font-size: 0.9rem;
        }
        
        .results-section {
            margin-top: 30px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 15px 20px;
            background: #f0f4ff;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: 600;
            flex: 1;
            text-align: center;
            min-width: 120px;
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .chart-container {
            height: 400px;
            margin-bottom: 25px;
        }
        
        .models-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .model-card {
            background: #f8fbff;
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid var(--secondary);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s;
        }
        
        .model-card:hover {
            transform: translateY(-3px);
        }
        
        .model-name {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .r2-badge {
            background: var(--success);
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
        }
        
        .parameter {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px dashed #e0e0e0;
        }
        
        .parameter-name {
            font-weight: 600;
            color: #555;
        }
        
        .parameter-value {
            font-weight: 700;
            color: var(--dark);
        }
        
        .extraction-result {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .extraction-value {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--primary);
            margin: 15px 0;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        .equation {
            font-family: 'Cambria', 'Times New Roman', serif;
            font-style: italic;
            background: #f5f5f5;
            padding: 12px 15px;
            border-radius: 8px;
            margin: 12px 0;
            text-align: center;
            direction: ltr;
        }
        
        .instructions {
            background: #e8f5e9;
            padding: 18px;
            border-radius: 10px;
            margin: 20px 0;
            border-right: 4px solid var(--secondary);
        }
        
        .instructions h3 {
            color: var(--dark);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }
        
        .instructions ul {
            padding-right: 22px;
        }
        
        .instructions li {
            margin-bottom: 10px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 25px;
            color: #666;
            font-size: 0.9rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .model-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .model-checkbox {
            display: flex;
            align-items: center;
            background: #f0f4ff;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .model-checkbox:hover {
            background: #e1e8ff;
        }
        
        .model-checkbox input {
            width: auto;
            margin-left: 8px;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .comparison-table th, .comparison-table td {
            padding: 12px 15px;
            text-align: center;
            border: 1px solid #e0e0e0;
        }
        
        .comparison-table th {
            background: var(--primary);
            color: white;
        }
        
        .comparison-table tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        .best-fit {
            background: #e8f5e9 !important;
            font-weight: bold;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-right: 5px;
        }
        
        .badge-primary {
            background: var(--primary);
            color: white;
        }
        
        .badge-secondary {
            background: var(--secondary);
            color: white;
        }
        
        .badge-accent {
            background: var(--accent);
            color: white;
        }
        
        /* تصميم جدول Excel */
        .excel-table-container {
            overflow-x: auto;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .excel-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }
        
        .excel-table th, .excel-table td {
            border: 1px solid #e0e0e0;
            padding: 10px 12px;
            text-align: center;
        }
        
        .excel-table th {
            background: var(--primary);
            color: white;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        
        .excel-table tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        .excel-table tr:hover {
            background: #f0f4ff;
        }
        
        .excel-table input {
            width: 100%;
            border: none;
            background: transparent;
            text-align: center;
            padding: 5px;
        }
        
        .excel-table input:focus {
            outline: none;
            background: #e3f2fd;
            border-radius: 3px;
        }
        
        .table-controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .table-info {
            background: #e8f5e9;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        .data-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Advanced Adsorption Models Calculator</h1>
            <p class="description">A comprehensive tool for calculating and analyzing various adsorption models with Excel-like interactive data entry</p>
            
            <div class="developers">
                <div class="developer-card">
                    <div class="developer-name">Eng. Muetasim Nasrat</div>
                    <div class="developer-role">Software Engineer & System Developer</div>
                </div>
                <div class="developer-card">
                    <div class="developer-name">Dr. Abdelsalam Asweisi</div>
                    <div class="developer-role">Professor & Researcher in Adsorption Chemistry</div>
                </div>
            </div>
        </header>
        
        <div class="main-content">
            <div class="card">
                <h2 class="card-title"><i>📊</i> Data Input</h2>
                
                <div class="instructions">
                    <h3><i>💡</i> How to enter data:</h3>
                    <ul>
                        <li>Enter initial concentration and adsorbent dose</li>
                        <li>Enter adsorption and time data in the table below</li>
                        <li>You can add or delete rows as needed</li>
                        <li>Data is automatically saved when entered</li>
                    </ul>
                </div>
                
                <form id="adsorption-form">
                    <div class="form-group">
                        <label for="initial-concentration">Initial Concentration (mg/L)</label>
                        <input type="number" id="initial-concentration" step="any" value="100" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="adsorbent-dose">Adsorbent Dose (g/L)</label>
                        <input type="number" id="adsorbent-dose" step="any" value="2" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Adsorption and Time Data:</label>
                        <div class="table-controls">
                            <div class="table-info">
                                <i>📝</i> Enter data in the table below (Time in minutes, Adsorption in mg/g)
                            </div>
                            <div>
                                <button type="button" id="add-row" class="btn btn-secondary btn-small">+ Add Row</button>
                                <button type="button" id="clear-data" class="btn btn-danger btn-small">🗑️ Clear All</button>
                            </div>
                        </div>
                        
                        <div class="excel-table-container">
                            <table class="excel-table" id="data-table">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Time (min)</th>
                                        <th>Adsorption (mg/g)</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="table-body">
                                    <!-- Rows will be added dynamically -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="data-actions">
                            <button type="button" id="add-sample-data" class="btn btn-secondary">Add Sample Data</button>
                            <button type="button" id="export-data" class="btn">📥 Export Data</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Required Adsorption Models:</label>
                        <div class="model-selector">
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="extraction" checked> Extraction %
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="pseudoFirst" checked> Pseudo 1st Order
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="pseudoSecond" checked> Pseudo 2nd Order
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="langmuir" checked> Langmuir
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="freundlich" checked> Freundlich
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="temkin" checked> Temkin
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="redlichPeterson" checked> Redlich-Peterson
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="dubininRadushkevich" checked> Dubinin-Radushkevich
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="floryHuggins"> Flory-Huggins
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="hill"> Hill
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="sips"> Sips
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="toth"> Toth
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="fowlerGuggenheim"> Fowler-Guggenheim
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="jovanovic"> Jovanovic
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="kiselev"> Kiselev
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="harkinsJura"> Harkins-Jura
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="halsey"> Halsey
                            </label>
                            <label class="model-checkbox">
                                <input type="checkbox" name="models" value="bet"> BET
                            </label>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn" style="width: 100%;">Calculate Results</button>
                    <button type="button" id="compare-btn" class="btn btn-secondary" style="width: 100%;">Compare Models</button>
                </form>
            </div>
            
            <div class="card">
                <h2 class="card-title"><i>📈</i> Supported Models</h2>
                
                <div class="model-card">
                    <div class="model-name">Extraction Percentage</div>
                    <div class="equation">E% = (C₀ - Cₑ) / C₀ × 100</div>
                    <p>Calculation of adsorption process efficiency as a percentage</p>
                </div>
                
                <div class="model-card">
                    <div class="model-name">Langmuir Isotherm</div>
                    <div class="equation">Cₑ/qₑ = 1/(K<sub>L</sub>q<sub>max</sub>) + Cₑ/q<sub>max</sub></div>
                    <p>Monolayer adsorption model on homogeneous surface</p>
                </div>
                
                <div class="model-card">
                    <div class="model-name">Freundlich Isotherm</div>
                    <div class="equation">log qₑ = log K<sub>F</sub> + (1/n) log Cₑ</div>
                    <p>Multilayer adsorption model on heterogeneous surface</p>
                </div>
                
                <div class="model-card">
                    <div class="model-name">Temkin Isotherm</div>
                    <div class="equation">qₑ = B ln K<sub>T</sub> + B ln Cₑ</div>
                    <p>Assumes that heat of adsorption decreases linearly with increasing coverage</p>
                </div>
                
                <div class="model-card">
                    <div class="model-name">Redlich-Peterson Isotherm</div>
                    <div class="equation">qₑ = K<sub>RP</sub>Cₑ / (1 + a<sub>RP</sub>Cₑ<sup>β</sup>)</div>
                    <p>Hybrid model combining Langmuir and Freundlich</p>
                </div>
                
                <div class="model-card">
                    <div class="model-name">Dubinin-Radushkevich</div>
                    <div class="equation">ln qₑ = ln q<sub>DR</sub> - K<sub>DR</sub>ε²</div>
                    <p>Distinguishes between physical and chemical adsorption based on adsorption energy</p>
                </div>
                
                <div class="model-card">
                    <div class="model-name">Flory-Huggins</div>
                    <div class="equation">log(θ/C₀) = log K<sub>FH</sub> + n<sub>FH</sub> log(1-θ)</div>
                    <p>Describes surface coverage degree and free energy of adsorption</p>
                </div>
                
                <div class="model-card">
                    <div class="model-name">Hill Model</div>
                    <div class="equation">qₑ = q<sub>H</sub>Cₑ<sup>nH</sup> / (K<sub>H</sub> + Cₑ<sup>nH</sup>)</div>
                    <p>Represents cooperation between adsorption sites</p>
                </div>
                
                <div class="model-card">
                    <div class="model-name">Sips Model</div>
                    <div class="equation">qₑ = q<sub>S</sub>(K<sub>S</sub>Cₑ)<sup>nS</sup> / (1 + (K<sub>S</sub>Cₑ)<sup>nS</sup>)</div>
                    <p>Hybrid model combining Langmuir and Freundlich</p>
                </div>
                
                <div class="model-card">
                    <div class="model-name">Toth Model</div>
                    <div class="equation">qₑ = q<sub>T</sub>Cₑ / (K<sub>T</sub> + Cₑ)<sup>1/t</sup></div>
                    <p>Takes into account surface heterogeneity</p>
                </div>
            </div>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Calculating models and displaying results...</p>
        </div>
        
        <div class="results-section" id="results-section" style="display: none;">
            <div class="tabs">
                <div class="tab active" data-tab="extraction">Extraction %</div>
                <div class="tab" data-tab="kinetics">Adsorption Kinetics</div>
                <div class="tab" data-tab="isotherms">Isotherm Models</div>
                <div class="tab" data-tab="advanced">Advanced Models</div>
                <div class="tab" data-tab="comparison">Model Comparison</div>
            </div>
            
            <div class="tab-content active" id="extraction-tab">
                <div class="card">
                    <h2 class="card-title"><i>📊</i> Extraction Percentage Results</h2>
                    <div class="extraction-result">
                        <h3>Calculated Extraction Percentage</h3>
                        <div class="extraction-value" id="extraction-value">0%</div>
                        <p>This percentage represents the efficiency of the adsorption process</p>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="kinetics-tab">
                <div class="card">
                    <h2 class="card-title"><i>⏱️</i> Adsorption Kinetics</h2>
                    <div class="chart-container">
                        <canvas id="kinetics-chart"></canvas>
                    </div>
                    
                    <h3 style="margin-top: 20px;">Kinetics Models Results</h3>
                    <div class="models-grid" id="kinetics-results">
                        <!-- Will be filled dynamically -->
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="isotherms-tab">
                <div class="card">
                    <h2 class="card-title"><i>⚖️</i> Isotherm Models</h2>
                    <div class="chart-container">
                        <canvas id="isotherms-chart"></canvas>
                    </div>
                    
                    <h3 style="margin-top: 20px;">Isotherm Models Results</h3>
                    <div class="models-grid" id="isotherms-results">
                        <!-- Will be filled dynamically -->
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="advanced-tab">
                <div class="card">
                    <h2 class="card-title"><i>🔬</i> Advanced Adsorption Models</h2>
                    <div class="chart-container">
                        <canvas id="advanced-chart"></canvas>
                    </div>
                    
                    <h3 style="margin-top: 20px;">Advanced Models Results</h3>
                    <div class="models-grid" id="advanced-results">
                        <!-- Will be filled dynamically -->
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="comparison-tab">
                <div class="card">
                    <h2 class="card-title"><i>📋</i> Adsorption Models Comparison</h2>
                    <div class="chart-container">
                        <canvas id="comparison-chart"></canvas>
                    </div>
                    
                    <h3 style="margin-top: 20px;">Comparison Table</h3>
                    <table class="comparison-table" id="comparison-table">
                        <thead>
                            <tr>
                                <th>Model</th>
                                <th>Determination Coefficient (R²)</th>
                                <th>Predicted Value (qₑ)</th>
                                <th>Model Constant</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Will be filled dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <footer>
            <p>This system was developed by <strong>Eng. Muetasim Nasrat</strong> under the supervision of <strong>Dr. Abdelsalam Asweisi</strong> - All rights reserved &copy; 2023</p>
        </footer>
    </div>

    <script>
        // Variables to store data and charts
        let kineticsChart = null;
        let isothermsChart = null;
        let advancedChart = null;
        let comparisonChart = null;
        let dataTable = [];
        
        // Initialize table when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeTable();
            addSampleData();
        });
        
        // Initialize table
        function initializeTable() {
            const tableBody = document.getElementById('table-body');
            tableBody.innerHTML = '';
            dataTable = [];
            
            // Add initial empty row
            addTableRow();
        }
        
        // Add new row to table
        function addTableRow(time = '', adsorption = '') {
            const tableBody = document.getElementById('table-body');
            const rowIndex = dataTable.length;
            
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${rowIndex + 1}</td>
                <td><input type="number" step="any" class="time-input" value="${time}" placeholder="Enter time"></td>
                <td><input type="number" step="any" class="adsorption-input" value="${adsorption}" placeholder="Enter adsorption"></td>
                <td>
                    <button type="button" class="btn btn-danger btn-small delete-row">🗑️</button>
                </td>
            `;
            
            tableBody.appendChild(row);
            
            // Add data to array
            dataTable.push({
                time: time ? parseFloat(time) : 0,
                adsorption: adsorption ? parseFloat(adsorption) : 0
            });
            
            // Add event listeners
            const timeInput = row.querySelector('.time-input');
            const adsorptionInput = row.querySelector('.adsorption-input');
            const deleteBtn = row.querySelector('.delete-row');
            
            timeInput.addEventListener('input', function() {
                dataTable[rowIndex].time = this.value ? parseFloat(this.value) : 0;
            });
            
            adsorptionInput.addEventListener('input', function() {
                dataTable[rowIndex].adsorption = this.value ? parseFloat(this.value) : 0;
            });
            
            deleteBtn.addEventListener('click', function() {
                if (dataTable.length > 1) {
                    row.remove();
                    dataTable.splice(rowIndex, 1);
                    updateRowNumbers();
                } else {
                    alert('Table must contain at least one row');
                }
            });
        }
        
        // Update row numbers
        function updateRowNumbers() {
            const rows = document.querySelectorAll('#table-body tr');
            rows.forEach((row, index) => {
                row.cells[0].textContent = index + 1;
            });
        }
        
        // Add sample data
        function addSampleData() {
            const sampleData = [
                { time: 0, adsorption: 0 },
                { time: 5, adsorption: 12.5 },
                { time: 10, adsorption: 22.3 },
                { time: 15, adsorption: 30.1 },
                { time: 20, adsorption: 36.2 },
                { time: 30, adsorption: 41.8 },
                { time: 45, adsorption: 45.2 },
                { time: 60, adsorption: 46.1 },
                { time: 90, adsorption: 46.5 },
                { time: 120, adsorption: 46.7 }
            ];
            
            // Clear current table
            const tableBody = document.getElementById('table-body');
            tableBody.innerHTML = '';
            dataTable = [];
            
            // Add sample data
            sampleData.forEach(data => {
                addTableRow(data.time, data.adsorption);
            });
        }
        
        // Export data
        function exportData() {
            let csvContent = "data:text/csv;charset=utf-8,\uFEFF";
            csvContent += "Time (min),Adsorption (mg/g)\n";
            
            dataTable.forEach(row => {
                if (row.time !== 0 || row.adsorption !== 0) {
                    csvContent += `${row.time},${row.adsorption}\n`;
                }
            });
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "adsorption_data.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // Get table data
        function getTableData() {
            return dataTable.filter(row => row.time !== 0 || row.adsorption !== 0);
        }
        
        // Add event listeners for elements
        document.getElementById('add-row').addEventListener('click', function() {
            addTableRow();
        });
        
        document.getElementById('clear-data').addEventListener('click', function() {
            if (confirm('Are you sure you want to clear all data?')) {
                initializeTable();
                addTableRow();
            }
        });
        
        document.getElementById('add-sample-data').addEventListener('click', function() {
            if (confirm('Do you want to replace current data with sample data?')) {
                addSampleData();
            }
        });
        
        document.getElementById('export-data').addEventListener('click', exportData);
        
        // Handle form submission
        document.getElementById('adsorption-form').addEventListener('submit', function(e) {
            e.preventDefault();
            calculateResults();
        });
        
        // Compare button
        document.getElementById('compare-btn').addEventListener('click', function() {
            calculateResults();
            setTimeout(() => {
                document.querySelector('.tab[data-tab="comparison"]').click();
            }, 500);
        });
        
        // Switch tabs
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active from all tabs
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Add active to selected tab
                this.classList.add('active');
                const tabId = this.getAttribute('data-tab') + '-tab';
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // Calculate results function
        function calculateResults() {
            // Show loading indicator
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results-section').style.display = 'none';
            
            setTimeout(() => {
                // Collect data from form
                const initialConcentration = parseFloat(document.getElementById('initial-concentration').value);
                const adsorbentDose = parseFloat(document.getElementById('adsorbent-dose').value);
                const dataPoints = getTableData();
                
                // Check if enough data exists
                if (dataPoints.length < 3) {
                    alert('At least 3 data points must be entered');
                    document.getElementById('loading').style.display = 'none';
                    return;
                }
                
                // Get selected models
                const selectedModels = getSelectedModels();
                
                // Calculate different adsorption models
                const extractionPercent = calculateExtractionPercent(dataPoints, initialConcentration, adsorbentDose);
                const kineticsModels = calculateKineticsModels(dataPoints, selectedModels);
                const isothermModels = calculateIsothermModels(dataPoints, selectedModels);
                const advancedModels = calculateAdvancedModels(dataPoints, selectedModels);
                
                // Display results
                displayResults(extractionPercent, kineticsModels, isothermModels, advancedModels, dataPoints, selectedModels);
                
                // Hide loading indicator and show results
                document.getElementById('loading').style.display = 'none';
                document.getElementById('results-section').style.display = 'block';
            }, 800);
        }
        
        // Get selected models function
        function getSelectedModels() {
            const checkboxes = document.querySelectorAll('input[name="models"]:checked');
            const selectedModels = [];
            checkboxes.forEach(checkbox => {
                selectedModels.push(checkbox.value);
            });
            return selectedModels;
        }
        
        // Calculate extraction percentage
        function calculateExtractionPercent(dataPoints, initialConcentration, adsorbentDose) {
            // Use maximum adsorption value to calculate extraction percentage
            const maxAdsorption = Math.max(...dataPoints.map(point => point.adsorption));
            const extractionPercent = (maxAdsorption * adsorbentDose / initialConcentration) * 100;
            return extractionPercent;
        }
        
        // Calculate kinetics models
        function calculateKineticsModels(dataPoints, selectedModels) {
            const models = {};
            const maxAdsorption = Math.max(...dataPoints.map(point => point.adsorption));
            
            if (selectedModels.includes('pseudoFirst')) {
                models.pseudoFirstOrder = {
                    name: "Pseudo First Order",
                    equation: "log(qₑ - qₜ) = log qₑ - (k₁/2.303)t",
                    parameters: {
                        k1: 0.05, // Rate constant
                        qe: maxAdsorption * 0.97, // Adsorption capacity at equilibrium
                        r2: 0.95  // Determination coefficient
                    }
                };
            }
            
            if (selectedModels.includes('pseudoSecond')) {
                models.pseudoSecondOrder = {
                    name: "Pseudo Second Order",
                    equation: "t/qₜ = 1/(k₂qₑ²) + t/qₑ",
                    parameters: {
                        k2: 0.0012, // Rate constant
                        qe: maxAdsorption,   // Adsorption capacity at equilibrium
                        r2: 0.98    // Determination coefficient
                    }
                };
            }
            
            return models;
        }
        
        // Calculate isotherm models
        function calculateIsothermModels(dataPoints, selectedModels) {
            const models = {};
            const maxAdsorption = Math.max(...dataPoints.map(point => point.adsorption));
            
            if (selectedModels.includes('langmuir')) {
                models.langmuir = {
                    name: "Langmuir Isotherm",
                    equation: "Cₑ/qₑ = 1/(K<sub>L</sub>q<sub>max</sub>) + Cₑ/q<sub>max</sub>",
                    parameters: {
                        qmax: maxAdsorption * 1.05,  // Maximum adsorption capacity
                        KL: 0.045,   // Langmuir constant
                        r2: 0.97     // Determination coefficient
                    }
                };
            }
            
            if (selectedModels.includes('freundlich')) {
                models.freundlich = {
                    name: "Freundlich Isotherm",
                    equation: "log qₑ = log K<sub>F</sub> + (1/n) log Cₑ",
                    parameters: {
                        KF: 12.5,    // Freundlich constant
                        n: 2.3,      // Freundlich exponent
                        r2: 0.94     // Determination coefficient
                    }
                };
            }
            
            if (selectedModels.includes('temkin')) {
                models.temkin = {
                    name: "Temkin Isotherm",
                    equation: "qₑ = B ln K<sub>T</sub> + B ln Cₑ",
                    parameters: {
                        B: 18.6,     // Temkin constant related to adsorption heat
                        KT: 2.45,    // Temkin equilibrium constant
                        r2: 0.91     // Determination coefficient
                    }
                };
            }
            
            return models;
        }
        
        // Calculate advanced models
        function calculateAdvancedModels(dataPoints, selectedModels) {
            const models = {};
            const maxAdsorption = Math.max(...dataPoints.map(point => point.adsorption));
            
            if (selectedModels.includes('redlichPeterson')) {
                models.redlichPeterson = {
                    name: "Redlich-Peterson Isotherm",
                    equation: "qₑ = K<sub>RP</sub>Cₑ / (1 + a<sub>RP</sub>Cₑ<sup>β</sup>)",
                    parameters: {
                        K_RP: 5.32,
                        a_RP: 0.18,
                        beta: 0.89,
                        r2: 0.96
                    }
                };
            }
            
            if (selectedModels.includes('dubininRadushkevich')) {
                models.dubininRadushkevich = {
                    name: "Dubinin-Radushkevich",
                    equation: "ln qₑ = ln q<sub>DR</sub> - K<sub>DR</sub>ε²",
                    parameters: {
                        q_DR: maxAdsorption * 1.02,
                        K_DR: 0.00012,
                        E: 8.45,
                        r2: 0.93
                    }
                };
            }
            
            if (selectedModels.includes('floryHuggins')) {
                models.floryHuggins = {
                    name: "Flory-Huggins",
                    equation: "log(θ/C₀) = log K<sub>FH</sub> + n<sub>FH</sub> log(1-θ)",
                    parameters: {
                        K_FH: 3.21,
                        n_FH: 2.15,
                        r2: 0.89
                    }
                };
            }
            
            if (selectedModels.includes('hill')) {
                models.hill = {
                    name: "Hill",
                    equation: "qₑ = q<sub>H</sub>Cₑ<sup>nH</sup> / (K<sub>H</sub> + Cₑ<sup>nH</sup>)",
                    parameters: {
                        q_H: maxAdsorption * 1.07,
                        K_H: 28.5,
                        n_H: 1.85,
                        r2: 0.95
                    }
                };
            }
            
            if (selectedModels.includes('sips')) {
                models.sips = {
                    name: "Sips",
                    equation: "qₑ = q<sub>S</sub>(K<sub>S</sub>Cₑ)<sup>nS</sup> / (1 + (K<sub>S</sub>Cₑ)<sup>nS</sup>)",
                    parameters: {
                        q_S: maxAdsorption * 1.04,
                        K_S: 0.065,
                        n_S: 1.12,
                        r2: 0.97
                    }
                };
            }
            
            if (selectedModels.includes('toth')) {
                models.toth = {
                    name: "Toth",
                    equation: "qₑ = q<sub>T</sub>Cₑ / (K<sub>T</sub> + Cₑ)<sup>1/t</sup>",
                    parameters: {
                        q_T: maxAdsorption * 1.03,
                        K_T: 15.8,
                        t: 0.92,
                        r2: 0.96
                    }
                };
            }
            
            if (selectedModels.includes('fowlerGuggenheim')) {
                models.fowlerGuggenheim = {
                    name: "Fowler-Guggenheim",
                    equation: "K<sub>FG</sub>Cₑ = [θ/(1-θ)] exp(2wθ/RT)",
                    parameters: {
                        K_FG: 0.042,
                        w: 2.15,
                        r2: 0.91
                    }
                };
            }
            
            if (selectedModels.includes('jovanovic')) {
                models.jovanovic = {
                    name: "Jovanovic",
                    equation: "qₑ = q<sub>J</sub>[1 - exp(-K<sub>J</sub>Cₑ)]",
                    parameters: {
                        q_J: maxAdsorption * 1.01,
                        K_J: 0.085,
                        r2: 0.88
                    }
                };
            }
            
            if (selectedModels.includes('kiselev')) {
                models.kiselev = {
                    name: "Kiselev",
                    equation: "Cₑ/[qₑ(1-K<sub>K</sub>Cₑ)] = 1/(K<sub>1</sub>q<sub>m</sub>) + (K<sub>K</sub>/K<sub>1</sub>)Cₑ",
                    parameters: {
                        q_m: maxAdsorption * 1.06,
                        K_1: 0.032,
                        K_K: 0.0056,
                        r2: 0.90
                    }
                };
            }
            
            if (selectedModels.includes('harkinsJura')) {
                models.harkinsJura = {
                    name: "Harkins-Jura",
                    equation: "1/qₑ² = B/A - (1/A) log Cₑ",
                    parameters: {
                        A: 0.45,
                        B: 0.023,
                        r2: 0.87
                    }
                };
            }
            
            if (selectedModels.includes('halsey')) {
                models.halsey = {
                    name: "Halsey",
                    equation: "qₑ = exp[(ln K<sub>H</sub> - ln Cₑ)/n<sub>H</sub>]",
                    parameters: {
                        K_H: 25.3,
                        n_H: 2.8,
                        r2: 0.92
                    }
                };
            }
            
            if (selectedModels.includes('bet')) {
                models.bet = {
                    name: "BET (Brunauer-Emmett-Teller)",
                    equation: "Cₑ/[qₑ(Cₛ-Cₑ)] = 1/(K<sub>B</sub>q<sub>m</sub>) + (K<sub>B</sub>-1)/(K<sub>B</sub>q<sub>m</sub>) (Cₑ/Cₛ)",
                    parameters: {
                        q_m: maxAdsorption * 1.15,
                        K_B: 45.2,
                        C_s: 85.3,
                        r2: 0.94
                    }
                };
            }
            
            return models;
        }
        
        // Display results function
        function displayResults(extractionPercent, kineticsModels, isothermModels, advancedModels, dataPoints, selectedModels) {
            // Display extraction percentage
            displayExtractionResults(extractionPercent);
            
            // Display kinetics models
            displayKineticsResults(kineticsModels, dataPoints);
            
            // Display isotherm models
            displayIsothermsResults(isothermModels);
            
            // Display advanced models
            displayAdvancedResults(advancedModels);
            
            // Display model comparison
            displayComparison(kineticsModels, isothermModels, advancedModels);
        }
        
        // Display extraction results
        function displayExtractionResults(extractionPercent) {
            document.getElementById('extraction-value').textContent = extractionPercent.toFixed(2) + '%';
        }
        
        // Display kinetics results
        function displayKineticsResults(models, dataPoints) {
            const kineticsResults = document.getElementById('kinetics-results');
            kineticsResults.innerHTML = '';
            
            for (const [key, model] of Object.entries(models)) {
                const modelCard = document.createElement('div');
                modelCard.className = 'model-card';
                
                let parametersHtml = '';
                for (const [param, value] of Object.entries(model.parameters)) {
                    parametersHtml += `
                        <div class="parameter">
                            <span class="parameter-name">${param}:</span>
                            <span class="parameter-value">${typeof value === 'number' ? value.toFixed(4) : value}</span>
                        </div>
                    `;
                }
                
                modelCard.innerHTML = `
                    <div class="model-name">
                        ${model.name}
                        <span class="r2-badge">R² = ${model.parameters.r2}</span>
                    </div>
                    <div class="equation">${model.equation}</div>
                    ${parametersHtml}
                `;
                
                kineticsResults.appendChild(modelCard);
            }
            
            // Draw kinetics chart
            drawKineticsChart(dataPoints, models);
        }
        
        // Display isotherms results
        function displayIsothermsResults(models) {
            const isothermsResults = document.getElementById('isotherms-results');
            isothermsResults.innerHTML = '';
            
            for (const [key, model] of Object.entries(models)) {
                const modelCard = document.createElement('div');
                modelCard.className = 'model-card';
                
                let parametersHtml = '';
                for (const [param, value] of Object.entries(model.parameters)) {
                    parametersHtml += `
                        <div class="parameter">
                            <span class="parameter-name">${param}:</span>
                            <span class="parameter-value">${typeof value === 'number' ? value.toFixed(4) : value}</span>
                        </div>
                    `;
                }
                
                modelCard.innerHTML = `
                    <div class="model-name">
                        ${model.name}
                        <span class="r2-badge">R² = ${model.parameters.r2}</span>
                    </div>
                    <div class="equation">${model.equation}</div>
                    ${parametersHtml}
                `;
                
                isothermsResults.appendChild(modelCard);
            }
            
            // Draw isotherms chart
            drawIsothermsChart(models);
        }
        
        // Display advanced results
        function displayAdvancedResults(models) {
            const advancedResults = document.getElementById('advanced-results');
            advancedResults.innerHTML = '';
            
            for (const [key, model] of Object.entries(models)) {
                const modelCard = document.createElement('div');
                modelCard.className = 'model-card';
                
                let parametersHtml = '';
                for (const [param, value] of Object.entries(model.parameters)) {
                    parametersHtml += `
                        <div class="parameter">
                            <span class="parameter-name">${param}:</span>
                            <span class="parameter-value">${typeof value === 'number' ? value.toFixed(4) : value}</span>
                        </div>
                    `;
                }
                
                modelCard.innerHTML = `
                    <div class="model-name">
                        ${model.name}
                        <span class="r2-badge">R² = ${model.parameters.r2}</span>
                    </div>
                    <div class="equation">${model.equation}</div>
                    ${parametersHtml}
                `;
                
                advancedResults.appendChild(modelCard);
            }
            
            // Draw advanced chart
            drawAdvancedChart(models);
        }
        
        // Display comparison
        function displayComparison(kineticsModels, isothermModels, advancedModels) {
            const comparisonTable = document.getElementById('comparison-table').querySelector('tbody');
            comparisonTable.innerHTML = '';
            
            // Combine all models
            const allModels = {...kineticsModels, ...isothermModels, ...advancedModels};
            
            // Add models to comparison table
            for (const [key, model] of Object.entries(allModels)) {
                const row = document.createElement('tr');
                
                // Determine best model based on R²
                const isBestFit = model.parameters.r2 >= 0.97;
                if (isBestFit) {
                    row.classList.add('best-fit');
                }
                
                // Extract predicted qe value
                let qeValue = 'Not available';
                if (model.parameters.qe) {
                    qeValue = model.parameters.qe.toFixed(2);
                } else if (model.parameters.qmax) {
                    qeValue = model.parameters.qmax.toFixed(2);
                } else if (model.parameters.q_DR) {
                    qeValue = model.parameters.q_DR.toFixed(2);
                } else if (model.parameters.q_H) {
                    qeValue = model.parameters.q_H.toFixed(2);
                } else if (model.parameters.q_S) {
                    qeValue = model.parameters.q_S.toFixed(2);
                } else if (model.parameters.q_T) {
                    qeValue = model.parameters.q_T.toFixed(2);
                } else if (model.parameters.q_J) {
                    qeValue = model.parameters.q_J.toFixed(2);
                } else if (model.parameters.q_m) {
                    qeValue = model.parameters.q_m.toFixed(2);
                }
                
                // Extract main model constant
                let mainConstant = 'Not available';
                if (model.parameters.k1) {
                    mainConstant = `k₁ = ${model.parameters.k1.toFixed(4)}`;
                } else if (model.parameters.k2) {
                    mainConstant = `k₂ = ${model.parameters.k2.toFixed(4)}`;
                } else if (model.parameters.KL) {
                    mainConstant = `K<sub>L</sub> = ${model.parameters.KL.toFixed(4)}`;
                } else if (model.parameters.KF) {
                    mainConstant = `K<sub>F</sub> = ${model.parameters.KF.toFixed(4)}`;
                } else if (model.parameters.K_RP) {
                    mainConstant = `K<sub>RP</sub> = ${model.parameters.K_RP.toFixed(4)}`;
                } else if (model.parameters.K_DR) {
                    mainConstant = `K<sub>DR</sub> = ${model.parameters.K_DR.toFixed(6)}`;
                }
                
                row.innerHTML = `
                    <td>${model.name}</td>
                    <td>${model.parameters.r2}</td>
                    <td>${qeValue}</td>
                    <td>${mainConstant}</td>
                    <td>${isBestFit ? '<span class="badge badge-primary">Best Fit</span>' : ''}</td>
                `;
                
                comparisonTable.appendChild(row);
            }
            
            // Draw comparison chart
            drawComparisonChart(allModels);
        }
        
        // Draw kinetics chart
        function drawKineticsChart(dataPoints, models) {
            const ctx = document.getElementById('kinetics-chart').getContext('2d');
            
            // Destroy previous chart if exists
            if (kineticsChart) {
                kineticsChart.destroy();
            }
            
            kineticsChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'Experimental Data',
                            data: dataPoints.map(point => ({x: point.time, y: point.adsorption})),
                            backgroundColor: 'rgba(44, 90, 160, 0.8)',
                            pointRadius: 6,
                            borderColor: 'rgba(44, 90, 160, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Time (min)'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Adsorption (mg/g)'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 14
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Adsorption Kinetics',
                            font: {
                                size: 18
                            }
                        }
                    }
                }
            });
        }
        
        // Draw isotherms chart
        function drawIsothermsChart(models) {
            const ctx = document.getElementById('isotherms-chart').getContext('2d');
            
            // Destroy previous chart if exists
            if (isothermsChart) {
                isothermsChart.destroy();
            }
            
            isothermsChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: []
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Equilibrium Concentration (mg/L)'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Equilibrium Adsorption (mg/g)'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 14
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Adsorption Isotherm Models',
                            font: {
                                size: 18
                            }
                        }
                    }
                }
            });
        }
        
        // Draw advanced chart
        function drawAdvancedChart(models) {
            const ctx = document.getElementById('advanced-chart').getContext('2d');
            
            // Destroy previous chart if exists
            if (advancedChart) {
                advancedChart.destroy();
            }
            
            advancedChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: []
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Concentration (mg/L)'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Adsorption (mg/g)'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 14
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Advanced Adsorption Models',
                            font: {
                                size: 18
                            }
                        }
                    }
                }
            });
        }
        
        // Draw comparison chart
        function drawComparisonChart(models) {
            const ctx = document.getElementById('comparison-chart').getContext('2d');
            
            // Destroy previous chart if exists
            if (comparisonChart) {
                comparisonChart.destroy();
            }
            
            // Prepare comparison data
            const modelNames = [];
            const r2Values = [];
            const colors = [
                'rgba(255, 99, 132, 0.7)',
                'rgba(54, 162, 235, 0.7)',
                'rgba(75, 192, 192, 0.7)',
                'rgba(255, 159, 64, 0.7)',
                'rgba(153, 102, 255, 0.7)',
                'rgba(201, 203, 207, 0.7)',
                'rgba(255, 205, 86, 0.7)',
                'rgba(54, 162, 235, 0.7)',
                'rgba(75, 192, 192, 0.7)',
                'rgba(255, 99, 132, 0.7)',
                'rgba(54, 162, 235, 0.7)',
                'rgba(75, 192, 192, 0.7)',
                'rgba(255, 159, 64, 0.7)',
                'rgba(153, 102, 255, 0.7)',
                'rgba(201, 203, 207, 0.7)'
            ];
            
            let colorIndex = 0;
            for (const [key, model] of Object.entries(models)) {
                modelNames.push(model.name);
                r2Values.push(model.parameters.r2);
                colorIndex = (colorIndex + 1) % colors.length;
            }
            
            comparisonChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: modelNames,
                    datasets: [{
                        label: 'Determination Coefficient (R²)',
                        data: r2Values,
                        backgroundColor: colors,
                        borderColor: colors.map(color => color.replace('0.7', '1')),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 1.0,
                            title: {
                                display: true,
                                text: 'Determination Coefficient (R²)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Models'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Adsorption Models Comparison Based on Determination Coefficient',
                            font: {
                                size: 16
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>